<script type="module">

import { db } from "./js/firebase-config.js";
import { collection, getDocs }
from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

window.checkStatus = async function(){

const phone = document.getElementById("phone").value;
const result = document.getElementById("result");
result.innerHTML = "";

const snapshot = await getDocs(collection(db,"applications"));

let found = false;

snapshot.forEach(docSnap=>{
const data = docSnap.data();

if(data.phone === phone){
found = true;
result.innerHTML = `
<h3>Status: ${data.status}</h3>
<p>Loan Amount: ₹${data.amount}</p>
<p>Interest: ₹${data.interest || 0}</p>
<p>Total Payable: ₹${data.totalPayable || 0}</p>
<p>Meeting Time: ${data.meeting || "Not Fixed Yet"}</p>
`;
}
});

if(!found){
result.innerHTML = "<p>No application found.</p>";
}
}

</script>
